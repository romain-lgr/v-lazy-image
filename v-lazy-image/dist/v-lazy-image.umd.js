var y=Object.defineProperty,h=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var l=(e,r,t)=>r in e?y(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,u=(e,r)=>{for(var t in r||(r={}))O.call(r,t)&&l(e,t,r[t]);if(a)for(var t of a(r))p.call(r,t)&&l(e,t,r[t]);return e},f=(e,r)=>h(e,I(r));(function(e,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VLazyImage=r(e.Vue))})(this,function(e){"use strict";var r={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:,"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(t,{attrs:c,slots:g,emit:o}){const s=e.ref(null),n=e.reactive({observer:null,intersected:!1,loaded:!1}),m=e.computed(()=>n.intersected&&t.src?t.src:t.srcPlaceholder),v=e.computed(()=>n.intersected&&t.srcset?t.srcset:!1),d=()=>{s.value.getAttribute("src")!==t.srcPlaceholder&&(n.loaded=!0,o("load"))},b=()=>o("error",s.value);return e.onMounted(()=>{"IntersectionObserver"in window&&(n.observer=new IntersectionObserver(i=>{i[0].isIntersecting&&(n.intersected=!0,n.observer.disconnect(),o("intersect"))},t.intersectionOptions),n.observer.observe(s.value))}),e.onBeforeUnmount(()=>{"IntersectionObserver"in window&&n.observer.disconnect()}),()=>{const i=e.h("img",f(u({ref:s,src:m.value,srcset:v.value||null},c),{class:[c.class,"v-lazy-image",{"v-lazy-image-loaded":n.loaded}],onLoad:d,onError:b}));return t.usePicture?e.h("picture",{ref:s,onLoad:d},n.intersected?[g.default,i]:[i]):i}}};return r});
